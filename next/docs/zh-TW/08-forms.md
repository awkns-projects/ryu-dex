# 表單

## 概覽

表單是友善的使用者介面，讓人類輸入資料並在您的表單中建立記錄。每個表單都映射到一個模型並確定使用者可以填寫哪些欄位。

## 什麼是表單？

**表單**是：
- 資料輸入介面
- 映射到特定模型
- 配置了選定的欄位
- 可自訂的佈局和樣式
- 提交時建立記錄

將表單視為資料進入系統的「前門」。

## 表單類型

平台支援兩種主要類型的表單：

### 管理員表單

**管理員表單**專為團隊成員和管理員的內部使用而設計。

**特徵**：
- **存取**：限制為工作區成員或特定角色
- **認證**：需要使用者登入
- **目的**：內部資料輸入、團隊協作、內容管理
- **權限**：可以按使用者角色（管理員、編輯者等）限制
- **上下文**：在平台介面內使用

**使用案例**：
- 內容建立者輸入部落格文章
- 團隊成員新增產品到目錄
- 管理員管理客戶記錄
- 內部任務和專案管理
- 營運工作流程的資料輸入

**範例**：
```
表單：新增新部落格文章（管理員表單）
存取：僅工作區編輯者
欄位：標題、內容、作者、類別、SEO 設定
目的：內部內容建立
```

### 成員表單

**成員表單**專為外部使用者提交資訊而設計。

**特徵**：
- **存取**：公開或透過連結共享
- **認證**：可選（可以是公開的或需要註冊）
- **目的**：從客戶、訪客或外部使用者收集資訊
- **權限**：對特定受眾開放
- **上下文**：嵌入網站、作為連結共享或在登陸頁面上

**使用案例**：
- 客戶聯絡表單
- 潛在客戶生成表單
- 活動註冊
- 職位申請
- 客戶反饋調查
- 支援工單提交
- 電子報註冊
- 產品查詢

**範例**：
```
表單：聯絡我們（成員表單）
存取：公開（任何有連結的人）
欄位：姓名、電子郵件、訊息、公司
目的：從網站訪客收集查詢
```

### 比較

| 功能 | 管理員表單 | 成員表單 |
|---------|-------------|--------------|
| **存取** | 內部團隊成員 | 外部使用者/公開 |
| **認證** | 必需 | 可選 |
| **權限** | 基於角色 | 公開或有限 |
| **使用案例** | 資料管理 | 資訊收集 |
| **品牌** | 內部 UI | 可自訂/嵌入 |
| **欄位** | 可包含所有欄位 | 通常限制欄位 |
| **後續** | 直接記錄編輯 | 自動化工作流程 |

## 表單結構

```
表單：新部落格文章

關聯模型：部落格文章

包含的欄位：
  ✅ 標題（必填）
  ✅ 內容（必填）
  ✅ 作者（必填）
  ✅ 類別（必填）
  ⬜ SEO 標題（可選）
  ⬜ SEO 描述（可選）
  ⬜ 標籤（可選）

排除的欄位：
  ❌ ID（自動生成）
  ❌ 發布日期（由動作設定）
  ❌ 檢視次數（自動追蹤）
  ❌ 狀態（預設為「草稿」）
```

## 建立表單

### 基本設定

**必要資訊**：
- **表單名稱**：描述性標題
- **目標模型**：哪個模型接收資料
- **描述**：表單的目的

**範例**：
```
名稱：提交部落格文章
模型：部落格文章
描述：供作者提交新部落格內容
```

### 欄位選擇

選擇要包含在表單中的模型欄位：

```
包含在表單中：
  ✅ 使用者輸入欄位（標題、內容、作者）
  ✅ 可選元資料（標籤、類別）
  ✅ 檔案上傳（圖像、附件）

從表單中排除：
  ❌ 自動生成的欄位（ID、時間戳記）
  ❌ 系統欄位（內部狀態、處理旗標）
  ❌ 計算欄位（計算值）
  ❌ 動作輸出欄位（AI 生成的內容）
```

### 欄位配置

對於表單中的每個欄位，進行配置：

```
欄位：文章標題
  標籤：「文章標題」
  佔位符：「輸入引人入勝的標題...」
  必填：是
  說明文字：「為最佳 SEO 保持在 60 個字元以下」
  驗證：10-100 個字元
  
欄位：類別
  標籤：「內容類別」
  類型：下拉選單
  選項：技術、行銷、產品、教學
  必填：是
  預設：無
  
欄位：標籤
  標籤：「標籤」
  類型：多選
  選項：AI、行銷、教學、案例研究
  必填：否
  最大選擇數：5
  說明文字：「選擇最多 5 個相關標籤」
```

## 表單佈局

### 佈局選項

#### 單欄
```
+---------------------------+
| 欄位 1                     |
| 欄位 2                     |
| 欄位 3                     |
| 欄位 4                     |
| [提交按鈕]                 |
+---------------------------+

適用於：簡單表單、行動優先設計
```

#### 雙欄
```
+-------------+-------------+
| 欄位 1      | 欄位 2      |
| 欄位 3      | 欄位 4      |
| 欄位 5（全寬）            |
| [提交按鈕]                |
+---------------------------+

適用於：相關欄位並排
```

#### 分段
```
+---------------------------+
| === 段落 1 ===            |
| 欄位 1                     |
| 欄位 2                     |
|                            |
| === 段落 2 ===            |
| 欄位 3                     |
| 欄位 4                     |
| [提交按鈕]                 |
+---------------------------+

適用於：組織許多欄位
```

#### 精靈/多步驟
```
步驟 1：基本資訊
  - 標題
  - 描述
  [下一步 →]

步驟 2：內容詳情
  - 內容
  - 類別
  - 標籤
  [← 返回] [下一步 →]

步驟 3：媒體
  - 精選圖像
  - 圖庫圖像
  [← 返回] [提交]

適用於：複雜表單、漸進式披露
```

## 表單功能

### 表單中的欄位類型

#### 文字輸入
```html
<input type="text" 
       name="title" 
       placeholder="文章標題..." 
       required 
       maxlength="100" />
```

#### 文字區域
```html
<textarea name="content" 
          rows="10" 
          placeholder="撰寫您的文章內容..."
          required>
</textarea>
```

#### 選擇下拉選單
```html
<select name="category" required>
  <option value="">選擇類別...</option>
  <option value="tech">技術</option>
  <option value="marketing">行銷</option>
  <option value="product">產品</option>
</select>
```

#### 單選按鈕
```html
<input type="radio" name="priority" value="low"> 低
<input type="radio" name="priority" value="medium"> 中
<input type="radio" name="priority" value="high"> 高
```

#### 核取方塊
```html
<input type="checkbox" name="featured"> 精選貼文
<input type="checkbox" name="newsletter"> 包含在電子報中
```

#### 多選
```html
<select name="tags" multiple>
  <option value="ai">AI</option>
  <option value="marketing">行銷</option>
  <option value="tutorial">教學</option>
</select>
```

#### 日期選擇器
```html
<input type="date" 
       name="publishDate" 
       min="2025-01-01" 
       max="2025-12-31" />
```

#### 檔案上傳
```html
<input type="file" 
       name="featuredImage" 
       accept="image/png, image/jpeg" 
       max-size="5MB" />
```

### 驗證

#### 客戶端驗證

```
欄位：電子郵件
  類型：電子郵件
  必填：是
  模式：有效的電子郵件格式
  
行為：
  - 在失去焦點時驗證（當使用者離開欄位時）
  - 顯示內聯錯誤訊息
  - 如果無效則阻止提交
  - 即時反饋
```

#### 伺服器端驗證

```
表單提交後：
  1. 驗證所有必填欄位是否存在
  2. 檢查欄位類型是否匹配
  3. 根據業務規則驗證
  4. 檢查重複項（唯一欄位）
  5. 如果有任何錯誤則返回
  
即使繞過客戶端驗證也能確保資料完整性
```

### 條件邏輯

#### 顯示/隱藏欄位

```
條件：如果勾選「有折扣」
  那麼：顯示「折扣代碼」欄位
  否則：隱藏「折扣代碼」欄位

基於使用者輸入的動態表單行為
```

### 預設值

```
欄位：狀態
  預設：「草稿」
  
欄位：建立日期
  預設：今天的日期
  
欄位：作者
  預設：當前使用者
  
預填欄位以節省時間
```

## 表單提交

### 提交流程

```
1. 使用者填寫表單
2. 客戶端驗證
3. 使用者點擊「提交」
4. 資料傳送到伺服器
5. 伺服器端驗證
6. 在模型的表單中建立記錄
7. 向使用者顯示確認
8. 可選：在新記錄上觸發動作
```

### 成功處理

```
成功提交後的選項：

1. 顯示成功訊息
   「您的文章已成功提交！」

2. 重新導向到記錄
   → 將使用者帶到新建立的記錄

3. 重新導向到清單
   → 將使用者帶回表單檢視

4. 清除表單以進行另一次提交
   → 重置所有欄位，停留在表單上

5. 自訂重新導向
   → 前往特定 URL
```

### 錯誤處理

```
如果提交失敗：

1. 顯示錯誤訊息
   - 特定於欄位的錯誤（突出顯示欄位）
   - 一般錯誤（表單頂部）
   
2. 保留使用者輸入
   - 不要清除表單
   - 保留所有輸入的值
   
3. 建議更正
   - 「電子郵件已存在」
   - 「請填寫必填欄位」
   
4. 允許重試
   - 使用者可以修正並重新提交
```

## 表單自訂

### 樣式

```
表單主題：
  - 品牌顏色
  - 自訂字體
  - 按鈕樣式
  - 輸入樣式
  - 錯誤訊息顏色
  - 成功訊息樣式

完全可自訂以符合您的品牌
```

### 標籤和說明文字

```
欄位配置：
  標籤：「電子郵件地址」
  佔位符：「you@example.com」
  說明文字：「我們絕不會與任何人分享您的電子郵件」
  必填指示符：「*」
  
為使用者提供清晰、有幫助的指導
```

## 進階表單功能

### 多步驟表單

```
步驟 1：基本資訊
  欄位：標題、類別
  驗證：必填欄位
  進度：33%
  
步驟 2：內容
  欄位：內容、標籤、圖像
  驗證：內容長度、圖像大小
  進度：66%
  
步驟 3：SEO 與發布
  欄位：SEO 標題、SEO 描述、發布日期
  驗證：可選
  進度：100%

優點：
  - 不那麼令人生畏
  - 複雜表單的更好使用者體驗
  - 漸進式披露
  - 清晰的進度指示
```

### 表單邏輯/計算

```
範例：訂單表單

欄位：數量（數字）
欄位：單價（貨幣，唯讀）
欄位：小計（貨幣，計算）
  公式：數量 × 單價
  
欄位：稅率（%，唯讀）
欄位：稅額（貨幣，計算）
  公式：小計 × 稅率
  
欄位：總計（貨幣，計算）
  公式：小計 + 稅額

使用者輸入時的即時計算
```

## 表單分享和嵌入

### 管理員表單存取

**管理員表單**在平台內存取：

```
設定：
  存取：僅工作區成員
  認證：必需
  位置：平台介面內
  
使用案例：
  - 內部資料輸入
  - 團隊協作
  - 內容管理
  - 管理任務
  
權限：
  - 管理員：對所有欄位的完全存取
  - 編輯者：對大多數欄位的存取
  - 檢視者：唯讀（無表單存取）
```

### 成員表單 - 公開存取

**成員表單**可以公開分享：

```
設定：
  存取：公開（任何有連結的人）
  URL：https://app.example.com/forms/contact-us
  
使用案例：
  - 客戶提交
  - 聯絡表單
  - 職位申請
  - 活動註冊
  - 潛在客戶捕獲
  - 反饋收集
```

### 成員表單 - 嵌入式

**成員表單**可以嵌入外部網站：

```html
嵌入程式碼：
<iframe src="https://app.example.com/forms/embed/contact-us" 
        width="100%" 
        height="800px" 
        frameborder="0">
</iframe>

嵌入到：
  - 您的公司網站
  - 部落格文章
  - 登陸頁面
  - 產品頁面
  - 行銷活動
```

**嵌入最佳實踐**：
- 對面向公眾的頁面使用成員表單
- 自訂樣式以符合您的品牌
- 保持表單欄位最少以提高轉換率
- 新增清晰的隱私政策連結
- 在行動裝置上測試

### 表單安全性

**管理員表單**：
```
安全性：
  - 需要認證
  - 基於角色的存取控制
  - 啟用稽核記錄
  - 僅內部網路（可選）
  
保護：
  - 只有授權使用者可以提交
  - 追蹤所有變更
  - 靜態資料加密
```

**成員表單**：
```
安全性：
  - CAPTCHA 保護（可選）
  - 速率限制
  - 垃圾郵件過濾
  - 電子郵件驗證（可選）
  
保護：
  - 防止機器人提交
  - 限制提交頻率
  - 驗證所有輸入
  - 符合 GDPR
```

## 最佳實踐

### 表單設計

**保持表單簡短**
```
好：
  僅必要欄位：5-7 個欄位
  快速完成
  更高的完成率

避免：
  20+ 個欄位
  使用者疲勞
  高放棄率
```

**使用智慧預設值**
```
盡可能預填：
  - 當前日期
  - 使用者姓名
  - 常見選擇
  - 先前輸入的值

節省時間，改善使用者體驗
```

**漸進式披露**
```
步驟 1：基本資訊（總是顯示）
  - 姓名
  - 電子郵件

步驟 2：詳細資訊（步驟 1 完成後顯示）
  - 公司
  - 電話

步驟 3：偏好（步驟 2 完成後顯示）
  - 電子報
  - 通知

感覺不那麼令人生畏
```

### 驗證

**客戶端驗證**
```
即時反饋：
  - 電子郵件格式檢查
  - 必填欄位檢查
  - 字元限制
  - 模式匹配

更好的使用者體驗，即時錯誤
```

**伺服器端驗證**
```
始終在伺服器端驗證：
  - 客戶端驗證可以被繞過
  - 檢查業務規則
  - 驗證唯一性
  - 清理輸入

安全性和資料完整性
```

## 下一步

- [動作](./09-actions.md) - 使用 AI 處理表單提交
- [欄位與記錄](./07-fields-and-records.md) - 了解表單建立的資料
- [使用案例](./15-use-cases.md) - 在真實世界場景中看到表單
- [最佳實踐](./14-best-practices.md) - 優化您的表單
