# 代理

## 概覽

代理是平台中的頂層組織單位。每個代理代表一個具有自己工作區、模型和工作流程的完整自動化專案。

## 什麼是代理？

**代理**是一個容器，包含特定自動化領域所需的一切：
- 多個工作區
- 共享配置
- 使用者權限
- 資源限制
- 計費/使用追蹤

將代理視為在平台上建立的完整「應用程式」。

## 代理結構

```
代理：內容行銷中心
  ├── 工作區：部落格製作
  ├── 工作區：社交媒體
  ├── 工作區：電子郵件活動
  └── 工作區：分析
```

## 建立代理

### 基本設定

**必要資訊**：
- **名稱**：代理的描述性識別符
- **描述**：代理的目的和範圍
- **圖示/頭像**：視覺識別符（可選）

**範例**：
```
名稱：電商自動化代理
描述：管理產品清單、庫存更新和客戶通訊
圖示：🛍️
```

### 配置選項

**設定**：
- **時區**：排程和時間戳記的預設時區
- **語言**：語言和區域設定
- **權限**：誰可以存取和修改
- **限制**：資源配額（API 呼叫、儲存等）

## 代理使用案例

### 按業務功能

#### 行銷代理
```
目的：管理所有行銷自動化
工作區：
  - 內容建立
  - 活動管理
  - 社交媒體
  - 分析與報告
```

#### 銷售代理
```
目的：自動化銷售流程
工作區：
  - 潛在客戶管理
  - 管道追蹤
  - 提案生成
  - 客戶入職
```

#### 營運代理
```
目的：簡化營運工作流程
工作區：
  - 任務管理
  - 庫存追蹤
  - 供應商管理
  - 合規監控
```

#### 客戶支援代理
```
目的：處理客戶服務自動化
工作區：
  - 工單管理
  - 知識庫
  - 客戶通訊
  - 反饋分析
```

### 按專案類型

#### 多客戶代理機構
```
每個客戶一個代理：
  - 客戶 A 代理
  - 客戶 B 代理
  - 客戶 C 代理
  
每個都有為提供的不同服務的工作區
```

#### SaaS 產品
```
代理：產品名稱
工作區：
  - 生產環境
  - 預備環境
  - 開發環境
  - 客戶資料
```

## 代理能力

### 代理可以做什麼

1. **組織工作區**
   - 建立多個隔離的環境
   - 邏輯上分離關注點
   - 管理不同的專案

2. **管理資源**
   - 在工作區之間分配 API 使用
   - 追蹤資料儲存限制
   - 監控執行配額

3. **控制存取**
   - 定義使用者角色和權限
   - 與團隊成員共享
   - 限制敏感操作

4. **追蹤使用情況**
   - 監控 API 呼叫
   - 審查動作執行
   - 分析效能指標

### 代理不能做什麼

- 代理**不能**直接在彼此之間共享資料
- 代理**不能**從其他代理繼承配置
- 代理**不能**跨代理邊界執行動作

## 代理最佳實踐

### 命名慣例

**好的名稱**：
- 內容行銷自動化
- 客戶入職系統
- 電商產品管理員
- HR 招聘管道

**不好的名稱**：
- 代理 1
- 測試
- 我的代理
- 未命名

### 組織策略

#### 策略 1：按功能
```
每個業務功能一個代理
- 行銷代理
- 銷售代理
- 支援代理
```

**優點**：清晰分離，易於管理權限  
**缺點**：可能需要複製一些模型

#### 策略 2：按專案
```
每個專案或客戶一個代理
- 客戶 A 專案
- 客戶 B 專案
- 內部工具
```

**優點**：完全隔離，易於計費  
**缺點**：較難共享學習

#### 策略 3：按環境
```
每個部署環境一個代理
- 生產代理
- 預備代理
- 開發代理
```

**優點**：鏡像傳統部署  
**缺點**：可能複製配置

#### 策略 4：混合
```
基於需求結合方法
- 生產行銷代理
- 生產銷售代理
- 開發代理（所有功能）
```

**優點**：靈活、可擴展  
**缺點**：需要規劃

## 管理多個代理

### 何時建立新代理

建立新代理當：
- ✅ 開始完全不同的業務功能
- ✅ 需要嚴格的資料分離（不同客戶）
- ✅ 需要不同的權限結構
- ✅ 建立不同的產品或服務
- ✅ 部署到不同的環境

使用新工作區而不是新代理當：
- ❌ 只是組織不同的活動
- ❌ 分離不同的內容類型
- ❌ 測試新功能
- ❌ 建立臨時專案

### 代理通訊

由於代理不能直接共享資料，您可以：

**選項 1：使用外部 API**
```
代理 A → 匯出到 API → 代理 B 匯入
```

**選項 2：共享資料庫**
```
兩個代理都連接到相同的外部資料庫
```

**選項 3：檔案匯出/匯入**
```
代理 A → 匯出 CSV → 代理 B 匯入 CSV
```

**選項 4：Webhook 整合**
```
代理 A 觸發 webhook → 代理 B 接收並處理
```

## 代理設定與配置

### 一般設定

```
名稱：客戶成功代理
描述：自動化客戶入職和支援工作流程
時區：America/New_York
語言：zh-TW
狀態：活躍
建立時間：2025-01-15
最後修改：2025-10-20
```

### 資源限制

```
API 呼叫：每月 10,000 次
儲存空間：5 GB
動作執行：每月 50,000 次
排程作業：100 個活躍排程
```

### 權限與存取控制

**角色**：
- **擁有者**：完全存取，可以刪除代理
- **管理員**：管理所有資源，不能刪除代理
- **編輯者**：建立和修改資源
- **檢視者**：唯讀存取
- **執行者**：可以執行動作，有限的編輯

**範例權限矩陣**：

| 角色 | 檢視 | 建立 | 編輯 | 刪除 | 執行 | 管理使用者 |
|------|------|--------|------|--------|---------|--------------|
| 擁有者 | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| 管理員 | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| 編輯者 | ✅ | ✅ | ✅ | ❌ | ✅ | ❌ |
| 檢視者 | ✅ | ❌ | ❌ | ❌ | ❌ | ❌ |
| 執行者 | ✅ | ❌ | ❌ | ❌ | ✅ | ❌ |

## 代理監控與分析

### 關鍵指標

**使用指標**：
- 總工作區數
- 總模型數
- 所有表單的總記錄數
- 執行的總動作數（最近 30 天）
- 進行的 API 呼叫數（最近 30 天）

**效能指標**：
- 平均動作執行時間
- 成功 vs. 失敗率
- 最常使用的模型
- 最常執行的動作

**資源指標**：
- 已使用的儲存空間
- 剩餘的 API 配額
- 排程執行次數
- 活躍 vs. 非活躍資源

### 活動日誌

追蹤所有變更和執行：
```
2025-10-20 10:30 AM - User@email.com 建立工作區「Q4 活動」
2025-10-20 10:45 AM - 系統在 15 筆記錄上執行動作「生成社交貼文」
2025-10-20 11:00 AM - User@email.com 連接 Instagram API
2025-10-20 11:30 AM - 排程「每日發布」成功完成
```

## 在代理之間遷移

### 從來源代理匯出
1. 選擇要匯出的資源（模型、表單、動作）
2. 匯出為 JSON 或 CSV
3. 包含配置檔案

### 匯入到目標代理
1. 建立對應的工作區
2. 匯入模型架構
3. 匯入資料（如果需要）
4. 重新配置 API 連接
5. 更新動作參照
6. 徹底測試

### 重要注意事項
- API 連接必須重新授權
- 排程必須重新建立
- 記錄 ID 將會改變
- 先在預備環境中測試

## 代理模板

### 預建代理模板

平台可能提供常見使用案例的模板：

**內容行銷模板**
```
包括：
- 部落格管理工作區
- 社交媒體工作區
- 預配置的貼文、活動、分析模型
- 範例表單和動作
```

**電商模板**
```
包括：
- 產品管理工作區
- 訂單處理工作區
- 客戶管理工作區
- 與 Shopify 等的預配置整合
```

### 建立自訂模板

將您的代理配置儲存為模板：
1. 建立並測試您的代理
2. 匯出為模板
3. 移除敏感資料（API 金鑰、客戶資料）
4. 與團隊或社群共享

## 疑難排解

### 常見問題

**問題**：無法建立工作區  
**解決方案**：檢查代理限制，確保您有適當的權限

**問題**：超出 API 配額  
**解決方案**：審查使用情況，升級計劃，或優化動作效率

**問題**：所有工作區的動作都失敗  
**解決方案**：檢查代理層級的 API 連接，審查系統狀態

**問題**：權限被拒絕錯誤  
**解決方案**：驗證使用者角色，檢查代理存取設定

## 下一步

- [工作區](./05-workspaces.md) - 了解在代理內組織
- [模型與表單](./06-models-and-sheets.md) - 建構您的資料
- [最佳實踐](./14-best-practices.md) - 優化您的代理設計

